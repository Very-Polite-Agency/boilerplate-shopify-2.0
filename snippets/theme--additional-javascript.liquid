<script async src="https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js"></script>
<script defer src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.min.js"></script>
<script defer src="https://cdn.jsdelivr.net/npm/@glidejs/glide@3.6.0/dist/glide.min.js"></script>
<script defer src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
<script defer src="https://cdn.jsdelivr.net/npm/axios@1.3.3/dist/axios.min.js"></script>
<script defer src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js"></script>

<script>

  window.lazySizesConfig = window.lazySizesConfig || {};
  window.lazySizesConfig.lazyClass = 'lazyload';
  lazySizesConfig.loadMode = 1;

  document.addEventListener('lazybeforeunveil', function(e){
    let bg = e.target.getAttribute('data-bg');
    if ( bg ) e.target.style.backgroundImage = 'url(' + bg + ')';
  });

  document.addEventListener('lazyloaded', function(e){
    e.target.parentNode.classList.add('lazyloaded');
  });

//   var WebFontConfig = {
//     typekit: { id: 'kre5wiu' }
//   };
//
//  (function(d) {
//     var wf = d.createElement('script'), s = d.scripts[0];
//     wf.src = 'https://cdn.jsdelivr.net/npm/webfontloader@1.6.28/webfontloader.min.js';
//     wf.async = true;
//     s.parentNode.insertBefore(wf, s);
//  })(document);

  var Theme = Theme || {};
  Theme.cart = {{ cart | json }};
  Theme.collection = {{ collection | json }} || {};
  Theme.currency = {{ shop.currency | json }};
  Theme.customer = {{ customer | json }} || {};
  Theme.moneyFormat = {{ shop.money_format | json }};
  Theme.orders = [];
  Theme.product = {{ product | json }} || {};
  Theme.routes = {
    root_url: '{{ routes.root_url }}',
    cart_url: '{{ routes.cart_url }}',
    cart_add_url: '{{ routes.cart_add_url }}',
    cart_change_url: '{{ routes.cart_change_url }}',
    cart_update_url: '{{ routes.cart_update_url }}',
    predictive_search_url: '{{ routes.predictive_search_url }}'
  };
  Theme.settings = {{ settings | json }} || {};
  Theme.svg = {
    icon: {
      cart: `{% render 'svg-icon', type: 'cart' %}`,
      trash: `{% render 'svg-icon', type: 'trash' %}`
    }
  }
  Theme.tools = {
    imgURLFilter: function(src, size) {
      return src
        .replace(/_(pico|icon|thumb|small|compact|medium|large|grande|original|1024x1024|2048x2048|master)+\./g, '.')
        .replace(/\.jpg|\.png|\.gif|\.jpeg/g, function(match) {
          return '_'+size+match;
        });
    }
  };

</script>
